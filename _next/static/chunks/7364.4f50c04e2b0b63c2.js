"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7364],{4471:function(e,r,a){a.r(r),a.d(r,{downloadSvgImage:function(){return i},loadImage:function(){return o},replaceImageColor:function(){return l}});var n=a(7363);let t=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;async function o(e){return new Promise(r=>{e.loading=!0;let a=new Image;e.element=a,a.addEventListener("load",()=>{e.loading=!1,r()}),a.addEventListener("error",()=>{e.element=void 0,e.error=!0,e.loading=!1,(0,n.jl)().error(`${n.gK} loading image: ${e.source}`),r()}),a.src=e.source})}async function i(e){if("svg"!==e.type){await o(e);return}e.loading=!0;let r=await fetch(e.source);r.ok?e.svgData=await r.text():((0,n.jl)().error(`${n.gK} Image not found`),e.error=!0),e.loading=!1}function l(e,r,a,i){let l=function(e,r,a){let{svgData:o}=e;if(!o)return"";let i=(0,n.vz)(r,a);if(o.includes("fill"))return o.replace(t,()=>i);let l=o.indexOf(">");return`${o.substring(0,l)} fill="${i}"${o.substring(l)}`}(e,a,i.opacity?.value??1),d={color:a,gif:r.gif,data:{...e,svgData:l},loaded:!1,ratio:r.width/r.height,replaceColor:r.replaceColor,source:r.src};return new Promise(r=>{let a=new Blob([l],{type:"image/svg+xml"}),n=URL||window.URL||window.webkitURL||window,t=n.createObjectURL(a),i=new Image;i.addEventListener("load",()=>{d.loaded=!0,d.element=i,r(d),n.revokeObjectURL(t)});let c=async()=>{n.revokeObjectURL(t);let a={...e,error:!1,loading:!0};await o(a),d.loaded=!0,d.element=a.element,r(d)};i.addEventListener("error",()=>void c()),i.src=t})}},7364:function(e,r,a){a.r(r),a.d(r,{loadImageShape:function(){return o}});var n=a(4471),t=a(7363);async function o(e,r=!0){var o;(o=e).loadImage||(o.loadImage=async e=>{if(!e.name&&!e.src)throw Error(`${t.gK} no image source provided`);if(o.images||(o.images=[]),!o.images.find(r=>r.name===e.name||r.source===e.src))try{let r;let t={gif:e.gif??!1,name:e.name??e.src,source:e.src,type:e.src.substring(e.src.length-3),error:!1,loading:!0,replaceColor:e.replaceColor,ratio:e.width&&e.height?e.width/e.height:void 0};if(o.images.push(t),e.gif){let{loadGifImage:e}=await a.e(3082).then(a.bind(a,3082));r=e}else r=e.replaceColor?n.downloadSvgImage:n.loadImage;await r(t)}catch{throw Error(`${t.gK} ${e.name??e.src} not found`)}});let{ImagePreloaderPlugin:i}=await a.e(8434).then(a.bind(a,8434)),{ImageDrawer:l}=await a.e(5050).then(a.bind(a,5050)),d=new i(e);await e.addPlugin(d,r),await e.addShape(["image","images"],new l(e),r)}}}]);